<!DOCTYPE html>
<html lang="zh-CN" class="no-js">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>联系我们 - TribitHub</title>
    <link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:400,600" rel="stylesheet">
    <link rel="icon" href="dist/images/favicon.ico">
    <link rel="stylesheet" href="dist/css/style.css">
    <script>
        // 主题切换的内联脚本，保持不变
        (function() {
            const theme = localStorage.getItem('theme');
            if (theme === 'light') {
                document.documentElement.classList.add('light-theme');
            }
        })();
    </script>
    <style>
        .form-status {
            margin-top: 16px;
            font-weight: 600;
            font-size: 16px;
        }
    </style>
</head>
<body class="is-boxed has-animations">
    <div class="body-wrap">
        <header class="site-header">
            <div class="container">
                <div class="site-header-inner">
                    <div class="brand header-brand">
                        <h1 class="m-0">
                            <a href="index.html">
                                <span class="header-brand-text">TribitHub</span>
                            </a>
                        </h1>
                    </div>
                    <ul class="header-links list-reset">
                        <li><a href="index.html">首页</a></li>
                        <li><a href="pricing.html">我们的介绍</a></li>
                        <li><a href="contact.html">联系我们</a></li>
                        <!-- 主题切换器将在这里 (如果您的JS文件里有逻辑) -->
                    </ul>
                </div>
            </div>
        </header>

        <main>
            <section class="contact-section section">
                <div class="container">
                    <div class="section-inner">
                        <div class="section-header text-center">
                            <h2 class="section-title mt-0">联系我们</h2>
                            <p class="section-paragraph">有任何想法或需求？请填写下方的表单，我们会在24小时内给您答复。</p>
                        </div>
                        
                        <div class="contact-wrap">
                            <div class="contact-form">
                                <form id="contactForm">
                                    <div class="field">
                                        <label class="label screen-reader-text" for="name">您的称呼</label>
                                        <div class="control">
                                            <input id="name" class="input" type="text" name="name" placeholder="您的称呼" required>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <label class="label screen-reader-text" for="email">电子邮件</label>
                                        <div class="control">
                                            <input id="email" class="input" type="email" name="email" placeholder="电子邮件" required>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <label class="label screen-reader-text" for="subject">项目主题</label>
                                        <div class="control">
                                            <input id="subject" class="input" type="text" name="subject" placeholder="项目主题 (例如: '小游戏插件定制')" required>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <label class="label screen-reader-text" for="message">需求描述</label>
                                        <div class="control">
                                            <textarea id="message" class="textarea" name="message" placeholder="请详细描述您的需求..." rows="5" required></textarea>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <div class="control">
                                            <button class="button button-primary button-block" type="submit">发送工单</button>
                                        </div>
                                    </div>
                                </form>
                                <div id="formStatus" class="form-status"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer class="site-footer">
             <div class="container">
                <div class="site-footer-inner">
                     <div class="footer-copyright">&copy; 2025 TribitHub, 版权所有</div>
                </div>
            </div>
        </footer>
    </div>

    <!-- ========= SUPABASE 客户端初始化 ========= -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        const SUPABASE_URL = 'https://geswrbnmsaqwqdwpoueo.supabase.co';       // 替换成你的 Supabase URL
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imdlc3dyYm5tc2Fxd3Fkd3BvdWVvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg0MzY1ODIsImV4cCI6MjA3NDAxMjU4Mn0.DwK4xdbsqXkDZZ65kBXBx2yhROEv2ZNybrtt8m8abW0'; // 替换成你的 Supabase Anon Key
        const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    </script>
    <!-- ======================================== -->

    <!-- ========= 表单提交逻辑 ========= -->
    <script>
    document.getElementById('contactForm').addEventListener('submit', async function(event) {
        event.preventDefault();
        const form = event.target;
        const formData = new FormData(form);
        const statusDiv = document.getElementById('formStatus');

        statusDiv.textContent = '正在提交...';
        statusDiv.style.color = 'var(--text-secondary)';

        // 使用 Supabase 客户端将数据插入 'tickets' 表
        const { data, error } = await supabase
            .from('tickets')
            .insert({
                name: formData.get('name'),
                email: formData.get('email'),
                subject: formData.get('subject'),
                message: formData.get('message')
            });

        if (error) {
            console.error('提交失败:', error);
            statusDiv.textContent = '提交失败: ' + error.message;
            statusDiv.style.color = '#FF4F4F';
        } else {
            statusDiv.textContent = '您的工单已成功提交！';
            statusDiv.style.color = '#02CB6A';
            form.reset();
        }
    });
    </script>
    <!-- ============================== -->

</body>
</html>